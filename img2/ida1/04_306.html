<!DOCTYPE html>
<html>
<head>
    <title>Canvas Test</title>
    <script type="text/javascript">
    let ctx;
    let cw;
    let ch;
    const density = 100;
    let particles = [];
    const density_line = 10;
    let lines = [];
    const density_tri = 10;
    let tris = [];
    function init(){
        let canvas = document.getElementById('mycanvas');
        if(!canvas ||!canvas.getContext){
            return false;
        }
        ctx = canvas.getContext('2d');
        cw = canvas.width;
        ch = canvas.height;
        for(let i=0;i < density; i++){
            particles[i] = new Particle(getRandomScale(), "rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")", getRandomVelocity(), getRandomVelocity(),1);
            particles[i] .position.x = cw/2;
            particles[i] .position.y = ch/4;
            particles[i] .draw();
        }
        for(let j=0;j < density_line; j++){
            lines[j] = new Line(getRandomX(), getRandomY(), getRandomVelocity(), getRandomVelocity(),getRandomX(), getRandomY(),getRandomVelocity(), getRandomVelocity(),"rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")",getRandomWidth(),1);
            lines[j].draw();
        }
        for(let k=0;k<density_tri;k++){
            tris[k] = new Tri(getRandomX(), getRandomY(),getRandomVelocity(), getRandomVelocity(), getRandomX(), getRandomY(), getRandomVelocity(), getRandomVelocity(), getRandomX(), getRandomY(), getRandomVelocity(), getRandomVelocity(),"rgba("+getRandomColor()+","+getRandomColor()+","+getRandomColor()+","+getRandomAlpha()+")",getRandomWidth(),1);
            tris[k].draw();
        }
        draw();
        setInterval("draw()",33);
    }
    class Particle {
        constructor(scale, color, vx, vy, gv){
            this.scale = scale;
            this.color = color;
            this.vx = vx;
            this.vy = vy;
            this.gv = gv;
            this.position = {
                x: 100,
                y: 100
            };
    }
    draw(){
        ctx.beginPath();
        ctx.arc(this.position.x, this.position.y, this.scale, 0, 2*Math.PI, false);
        ctx.fillStyle = this.color;
        ctx.fill();
    }
update(){
    this.vy += this.gv;
    this.position.x += this.vx;
    this.position.y += this.vy;
    this.draw();
    if(this.position.x > cw) this.position.x -= cw;
    if(this.position.y > ch) this.vy = -this.vy;
    }
}
class Line{
    constructor(x1, y1, vx1, vy1, x2, y2, vx2, vy2, color, width, gv){
        this.position1 = {x:x1, y:y1};
        this.v1 = {x:vx1, y:vy1};
        this.position2 = {x:x2, y:y2};
        this.v2 = {x:vx2, y:vy2};
        this.color = color;
        this.width = width;
        this.gv = gv;
    }
    draw(){
        ctx.strokeStyle = this.color;
        ctx.lineWidth = this.width;
        ctx.beginPath();
        ctx.moveTo(this.position1.x, this.position1.y);
        ctx.lineTo(this.position2.x, this.position2.y);
        ctx.stroke();
    }
    update(){
        this.v1.y += this.gv;
        this.v2.y += this.gv;
        this.position1.x += this.v1.x;
        this.position1.y += this.v1.y;
        this.position2.x += this.v2.x;
        this.position2.y += this.v2.y;
        this.draw();
        if(this.position1.y > ch) this.v1.y = -this.v1.y;
        if(this.position2.y > ch) this.v2.y = -this.v2.y;
    }
}
class Tri {
    constructor(x1, y1, vx1, vy1, x2, y2, vx2, vy2, x3, y3, vx3, vy3, color, width, gv){
        this.position1 = {x:x1, y:y1};
        this.v1 = {x:vx1, y:vy1};
        this.position2 = {x:x2, y:y2};
        this.v2 = {x:vx2, y:vy2};
        this.position3 = {x:x3, y:y3};
        this.v3 = {x:vx3, y:vy3};
        this.color = color;
        this.width = width;
        this.gv = gv;
    }
    draw(){
        ctx.strokeStyle = this.color;
        ctx.lineWidth = this.width;
        ctx.beginPath();
        ctx.moveTo(this.position1.x, this.position1.y);
        ctx.lineTo(this.position2.x, this.position2.y);
        ctx.lineTo(this.position3.x, this.position3.y);
        ctx.lineTo(this.position1.x, this.position1.y);
        ctx.stroke();
    }
    update(){
        this.v1.y += this.gv;
        this.v2.y += this.gv;
        this.v3.y += this.gv;
        this.position1.x += this.v1.x;
        this.position1.y += this.v1.y;
        this.position2.x += this.v2.x;
        this.position2.y += this.v2.y;
        this.position3.x += this.v3.x;
        this.position3.y += this.v3.y;
        this.draw();
        if(this.position1.y > ch) this.v1.y =-this.v1.y;
        if(this.position2.y > ch) this.v2.y =-this.v2.y;
        if(this.position3.y > ch) this.v3.y =-this.v3.y;
    }
}
function draw(){
        ctx.fillStyle = "rgba(255,255,255,1)";
        ctx.fillRect(0,0,cw,ch);
        for(let i=0;i < density; i++){
            particles[i] .update();
        }
        for(let j=0;j < density_line; j++){
            lines[j].update();
        }
        for(let k=0;k < density_tri; k++){
            tris[k].update();
        }
}
function getRandomColor(){
    return Math.floor(Math.random()*255);
}
function getRandomAlpha(){
    return Math.random();
}
function getRandomScale(){
    return (Math.random()*(8-3))+3;
}
function getRandomX(){
    return Math.random()*cw;
}
function getRandomY(){
    return Math.random()*ch;
}
function getRandomWidth(){
    return Math.random()*10;
}
function getRandomVelocity(){
    return Math.random()*20-10;
}
    </script>
</head>
<body onload="init();">
    <H1>Canvas Test</H1>
    <canvas id="mycanvas" width="1000" height="800"></canvas>
    
</body>
</html>